(()=>{var e={};e.id=3,e.ids=[3],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},79348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55315:e=>{"use strict";e.exports=require("path")},41710:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>u});var s=r(49442),n=r(10042),o=r(48190),i=r.n(o),a=r(63289),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let u=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,34165)),"/Users/elisha/usekampuni/src/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,93240)),"/Users/elisha/usekampuni/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11112)),"/Users/elisha/usekampuni/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/elisha/usekampuni/src/app/admin/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},704:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,46472,23)),Promise.resolve().then(r.t.bind(r,42461,23)),Promise.resolve().then(r.t.bind(r,48190,23)),Promise.resolve().then(r.t.bind(r,15282,23)),Promise.resolve().then(r.t.bind(r,56613,23)),Promise.resolve().then(r.t.bind(r,5486,23)),Promise.resolve().then(r.t.bind(r,58825,23))},66770:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52144,23)),Promise.resolve().then(r.t.bind(r,62302,23)),Promise.resolve().then(r.t.bind(r,63582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,65329,23)),Promise.resolve().then(r.t.bind(r,50599,23)),Promise.resolve().then(r.t.bind(r,62118,23))},80806:(e,t,r)=>{Promise.resolve().then(r.bind(r,53453)),Promise.resolve().then(r.bind(r,57348))},31106:(e,t,r)=>{Promise.resolve().then(r.bind(r,95683)),Promise.resolve().then(r.bind(r,88859))},92562:(e,t,r)=>{Promise.resolve().then(r.bind(r,34165))},54350:(e,t,r)=>{Promise.resolve().then(r.bind(r,93069))},78855:(e,t,r)=>{Promise.resolve().then(r.bind(r,18645))},9637:(e,t,r)=>{Promise.resolve().then(r.bind(r,96087))},75750:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(88147).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},4619:(e,t,r)=>{"use strict";var s=r(9877);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},93069:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(20149),n=r(63606),o=r(665),i=r(24855),a=r(38691),l=r(32017),u=r(48618),d=r(74542),c=(0,i.z)({chartName:"BarChart",GraphicalChild:a.$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:l.K},{axisType:"yAxis",AxisComp:u.B}],formatAxisMap:d.t9}),m=r(31044),p=r(54288),f=r(31486);function h(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!0);return r?(0,s.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):e?(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-8",children:"Dashboard Overview"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Companies"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.totalCompanies})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Active Companies"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.activeCompanies})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Tenders"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.totalTenders})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-gray-500 text-sm font-medium",children:"Total Encumbrances"}),(0,s.jsx)("p",{className:"text-3xl font-bold",children:e.totalEncumbrances})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Company Registrations"}),(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(o.h,{width:"100%",height:"100%",children:(0,s.jsxs)(c,{data:e.recentActivity,children:[(0,s.jsx)(m.q,{strokeDasharray:"3 3"}),(0,s.jsx)(l.K,{dataKey:"date"}),(0,s.jsx)(u.B,{}),(0,s.jsx)(p.u,{}),(0,s.jsx)(f.D,{}),(0,s.jsx)(a.$,{dataKey:"companies",fill:"#3b82f6",name:"New Companies"})]})})})]})]}):null}},96087:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(20149),n=r(85723),o=r(4619),i=r(88859),a=r(75750);function l({companyCount:e}){let{user:t,logout:r}=(0,i.a)();(0,o.usePathname)();let l=async()=>{await r(),window.location.href="/login"};return(0,s.jsx)("nav",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(n.default,{href:"/admin",className:"text-xl font-bold text-gray-900",children:"kampuni"}),(0,s.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[e," Companies"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"text-gray-700",children:t?.name||t?.email}),(0,s.jsxs)("button",{onClick:l,className:"text-gray-600 hover:text-gray-900 font-medium flex items-center space-x-2",children:[(0,s.jsx)(a.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Logout"})]})]})]})})})}},95683:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(20149),n=r(85723);function o(){return(0,s.jsx)("nav",{className:"bg-white shadow-sm",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(n.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"kampuni"})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(n.default,{href:"/login",className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 font-medium",children:"Login"})})]})})})}},88859:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>a});var s=r(20149),n=r(63606);let o=(0,n.createContext)(void 0);function i({children:e}){let[t,r]=(0,n.useState)(null),[i,a]=(0,n.useState)(!0);return(0,s.jsx)(o.Provider,{value:{user:t,loading:i,login:(e,t)=>fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(e=>{if(!e.ok)throw Error("Login failed");return e.json()}).then(e=>(r(e.user),e.redirectUrl)),logout:()=>fetch("/api/auth/logout",{method:"POST"}).then(()=>{r(null)})},children:e})}function a(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},71623:(e,t,r)=>{"use strict";var s=r(85941);r.o(s,"redirect")&&r.d(t,{redirect:function(){return s.redirect}})},46898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isNextRouterError",{enumerable:!0,get:function(){return o}});let s=r(77361),n=r(14722);function o(e){return(0,n.isRedirectError)(e)||(0,s.isNotFoundError)(e)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},85941:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return a},RedirectType:function(){return s.RedirectType},notFound:function(){return n.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect},unstable_rethrow:function(){return o.unstable_rethrow}});let s=r(14722),n=r(77361),o=r(29097);class i extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class a extends URLSearchParams{append(){throw new i}delete(){throw new i}set(){throw new i}sort(){throw new i}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14852:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14722:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return a},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return c},isRedirectError:function(){return d},permanentRedirect:function(){return u},redirect:function(){return l}});let n=r(209),o=r(14852),i="NEXT_REDIRECT";function a(e,t,r){void 0===r&&(r=o.RedirectStatusCode.TemporaryRedirect);let s=Error(i);return s.digest=i+";"+t+";"+e+";"+r+";",s}function l(e,t){let r=n.actionAsyncStorage.getStore();throw a(e,t||((null==r?void 0:r.isAction)?"push":"replace"),o.RedirectStatusCode.TemporaryRedirect)}function u(e,t){throw void 0===t&&(t="replace"),a(e,t,o.RedirectStatusCode.PermanentRedirect)}function d(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let t=e.digest.split(";"),[r,s]=t,n=t.slice(2,-2).join(";"),a=Number(t.at(-2));return r===i&&("replace"===s||"push"===s)&&"string"==typeof n&&!isNaN(a)&&a in o.RedirectStatusCode}function c(e){return d(e)?e.digest.split(";").slice(2,-2).join(";"):null}function m(e){if(!d(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!d(e))throw Error("Not a redirect error");return Number(e.digest.split(";").at(-2))}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},29097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"unstable_rethrow",{enumerable:!0,get:function(){return function e(t){if((0,i.isNextRouterError)(t)||(0,o.isBailoutToCSRError)(t)||(0,s.isDynamicUsageError)(t)||(0,n.isPostpone)(t))throw t;t instanceof Error&&"cause"in t&&e(t.cause)}}});let s=r(66714),n=r(15730),o=r(38465),i=r(46898);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},66714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicUsageError",{enumerable:!0,get:function(){return a}});let s=r(3105),n=r(38465),o=r(46898),i=r(94375),a=e=>(0,s.isDynamicServerError)(e)||(0,n.isBailoutToCSRError)(e)||(0,o.isNextRouterError)(e)||(0,i.isDynamicPostpone)(e)},15730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isPostpone",{enumerable:!0,get:function(){return s}});let r=Symbol.for("react.postpone");function s(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}},38465:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{BailoutToCSRError:function(){return s},isBailoutToCSRError:function(){return n}});let r="BAILOUT_TO_CLIENT_SIDE_RENDERING";class s extends Error{constructor(e){super("Bail out to client-side rendering: "+e),this.reason=e,this.digest=r}}function n(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}},93240:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var s=r(47705),n=r(18645),o=r(96826),i=r(78051),a=r(71623);async function l({children:e}){let t=(0,i.cookies)(),r=t.get("session")?.value;r||(0,a.redirect)("/login");let l=await o._.user.findUnique({where:{id:r},select:{id:!0,email:!0,name:!0,isAdmin:!0}});l?.isAdmin||(0,a.redirect)("/login");let u=await o._.company.count();return(0,s.jsxs)("div",{children:[(0,s.jsx)(n.default,{companyCount:u}),(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e})]})}},34165:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/elisha/usekampuni/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/elisha/usekampuni/src/app/admin/page.tsx","default")},11112:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>u});var s=r(47705),n=r(60177),o=r.n(n);r(5023);var i=r(57348),a=r(53453),l=r(78051);let u={title:"Kampuni",description:"Access accurate, real-time information about businesses across Africa."};function d({children:e}){return(0,l.cookies)(),(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:o().className,children:(0,s.jsxs)(i.AuthProvider,{children:[(0,s.jsx)(a.default,{}),e]})})})}},18645:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/elisha/usekampuni/src/components/admin/AdminNav.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/elisha/usekampuni/src/components/admin/AdminNav.tsx","default")},53453:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(78105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/elisha/usekampuni/src/components/navigation/MainNav.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/elisha/usekampuni/src/components/navigation/MainNav.tsx","default")},57348:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>n});var s=r(78105);let n=(0,s.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/elisha/usekampuni/src/context/AuthContext.tsx","AuthProvider");(0,s.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/elisha/usekampuni/src/context/AuthContext.tsx","useAuth")},96826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,_:()=>n});var s=r(53524);let n=globalThis.prisma??new s.PrismaClient,o=n},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[492,51,535,882],()=>r(41710));module.exports=s})();