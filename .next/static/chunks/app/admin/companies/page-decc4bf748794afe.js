(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{40343:(e,t,a)=>{Promise.resolve().then(a.bind(a,45647))},78030:(e,t,a)=>{"use strict";a.d(t,{Z:()=>c});var s=a(2265);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...l,width:r,height:r,stroke:a,strokeWidth:c?24*Number(n)/Number(r):n,className:i("lucide",d),...x},[...m.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let a=(0,s.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,s.createElement)(n,{ref:l,iconNode:t,className:i("lucide-".concat(r(e)),c),...d})});return a.displayName="".concat(e),a}},92513:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(78030).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},54817:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(78030).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6649:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});let s=(0,a(78030).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},45647:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var s=a(57437),r=a(2265),i=a(87138),l=a(92513),n=a(54817),c=a(6649);function d(){let[e,t]=(0,r.useState)([]),[a,d]=(0,r.useState)(!0),[o,m]=(0,r.useState)(null),[x,h]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{try{d(!0),m(null);let e=await fetch("/api/admin/companies");if(!e.ok)throw Error("Failed to fetch companies");let a=await e.json();t(a)}catch(e){console.error("Failed to fetch companies:",e),m("Failed to load companies")}finally{d(!1)}})()},[]);let u=async a=>{if(window.confirm("Are you sure you want to delete this company?"))try{if(!(await fetch("/api/admin/companies/".concat(a),{method:"DELETE"})).ok)throw Error("Failed to delete company");t(e.filter(e=>e.id!==a))}catch(e){console.error("Delete failed:",e),alert("Failed to delete company")}},p=e.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.registrationNumber.toLowerCase().includes(x.toLowerCase()));return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Companies"}),(0,s.jsxs)(i.default,{href:"/admin/companies/new",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,s.jsx)(l.Z,{className:"h-5 w-5 mr-2"}),"Add Company"]})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search companies...",value:x,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)(n.Z,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})}),a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):o?(0,s.jsx)("div",{className:"p-4 text-center text-red-500",children:o}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Number"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registration Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.registrationNumber})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("ACTIVE"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.registrationDate).toLocaleDateString()}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(i.default,{href:"/admin/companies/".concat(e.id,"/edit"),className:"text-blue-600 hover:text-blue-900",children:(0,s.jsx)(c.Z,{className:"h-5 w-5"})}),(0,s.jsxs)("button",{onClick:()=>u(e.id),className:"text-red-600 hover:text-red-900",children:[(0,s.jsx)("span",{className:"sr-only",children:"Delete"}),(0,s.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})]})]})})]},e.id))})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[138,130,215,744],()=>t(40343)),_N_E=e.O()}]);