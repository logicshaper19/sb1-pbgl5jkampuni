(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{22972:(e,t,s)=>{Promise.resolve().then(s.bind(s,42306))},42306:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=s(57437),r=s(2265),l=s(87138),n=s(36127),i=s(71510),c=s(37164),d=s(6649);function o(e){var t,s,o;let{company:m,user:x}=e,[h,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),f=async()=>{let e=window.location.href;try{await navigator.clipboard.writeText(e),p(!0),setTimeout(()=>p(!1),2e3)}catch(e){console.error("Failed to copy URL:",e)}},j=async()=>{try{let e=await fetch("/api/companies/".concat(m.id,"/pdf"));if(!e.ok)throw Error("Failed to generate PDF");let t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="".concat(m.name,"-profile.pdf"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}catch(e){console.error("Download failed:",e),alert("Failed to download company profile")}};return(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg",children:[(0,a.jsxs)("div",{className:"px-6 py-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:m.name}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Registration: ",m.registrationNumber]}),"ACTIVE"!==m.status&&(0,a.jsxs)("div",{className:"ml-3 flex items-center text-amber-600",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:m.status})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("button",{onClick:f,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4 mr-2"}),g?"Copied!":"Share"]}),(0,a.jsxs)("button",{onClick:j,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),(null==x?void 0:x.isAdmin)&&(0,a.jsxs)(l.default,{href:"/admin/companies/".concat(m.id,"/edit"),className:"inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]}),(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Incorporation Date"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:new Date(m.registrationDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:"string"==typeof(o=m.address)?o:[o.building,o.street,o.locality,o.city,o.postalCode,o.postalAddress].filter(Boolean).join(", ")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Contact"}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:[(null===(t=m.contactInfo)||void 0===t?void 0:t.email)&&(0,a.jsx)("a",{href:"mailto:".concat(m.contactInfo.email),className:"text-blue-600 hover:text-blue-500",children:m.contactInfo.email}),(null===(s=m.contactInfo)||void 0===s?void 0:s.phone)&&(0,a.jsx)("span",{className:"block",children:m.contactInfo.phone})]})]})]})]}),h&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Share Company Profile"}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("input",{type:"text",readOnly:!0,value:window.location.href,className:"w-full px-3 py-2 border rounded-md"})}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-500",children:"Close"})})]})})]})}var m=s(74232),x=s(24241),h=s(49321),u=s(11240),g=s(14392),p=s(42421);function f(e){let{company:t}=e,[s,l]=(0,r.useState)(!1),n=s?t.directors:t.directors.slice(0,3);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Company Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Registration"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:t.registrationNumber})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Incorporation Date"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:new Date(t.registrationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Registered Address"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:"string"==typeof t.address?t.address:"".concat(t.address.street||"",", ").concat(t.address.city||""," ").concat(t.address.postalCode||"")})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Directors"}),(0,a.jsxs)("div",{className:"space-y-4",children:[n.map((e,t)=>{var s,r;return(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg bg-gray-50",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-400 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsxs)("div",{className:"mt-1 text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["Appointed: ",(null===(r=e.appointments)||void 0===r?void 0:null===(s=r[0])||void 0===s?void 0:s.date)?new Date(e.appointments[0].date).toLocaleDateString():"N/A"]}),e.nationality&&(0,a.jsxs)("p",{children:["Nationality: ",e.nationality]}),e.position&&(0,a.jsxs)("p",{children:["Position: ",e.position]})]})]})]},e.id)}),t.directors.length>3&&(0,a.jsx)("button",{onClick:()=>l(!s),className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Show All Directors (",t.directors.length,")"]})})]})]}),t.description&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About"}),(0,a.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,a.jsx)("p",{className:"text-gray-600",children:t.description})})]}),t.industryClassification&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Industry Classification"}),(0,a.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.industryClassification})})]}),t.complianceStatus&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Compliance Status"}),(0,a.jsx)("div",{className:"rounded-lg p-3 ".concat("COMPLIANT"===t.complianceStatus?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:(0,a.jsx)("p",{className:"text-sm font-medium",children:t.complianceStatus})})]})]})}var j=s(35231),y=s(92566),N=s(54142),b=s(2842),v=s(9542),w=s(85475),D=s(20153),S=s(16638),C=s(53225),k=s(29162);function Z(e){let{results:t}=e,[s,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)("revenue"),c=[...t].sort((e,t)=>new Date(t.year).getTime()-new Date(e.year).getTime()),d=s?c:c.slice(0,3),o=c.map(e=>({year:e.year,revenue:e.revenue,profit:e.profit})),m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(e),x=(e,t)=>t?(e-t)/t*100:null;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Financial Results"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>i("revenue"),className:"px-3 py-1 text-sm rounded-md ".concat("revenue"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Revenue"}),(0,a.jsx)("button",{onClick:()=>i("profit"),className:"px-3 py-1 text-sm rounded-md ".concat("profit"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Profit"})]})]}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(j.h,{width:"100%",height:"100%",children:(0,a.jsxs)(y.w,{data:o,children:[(0,a.jsx)(N.q,{strokeDasharray:"3 3"}),(0,a.jsx)(b.K,{dataKey:"year"}),(0,a.jsx)(v.B,{tickFormatter:m,domain:["auto","auto"]}),(0,a.jsx)(w.u,{formatter:e=>m(e),labelFormatter:e=>"Year ".concat(e)}),(0,a.jsx)(D.D,{}),(0,a.jsx)(S.x,{type:"monotone",dataKey:n,stroke:"#2563eb",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})}),(0,a.jsxs)("div",{className:"space-y-4",children:[d.map((e,t)=>{let s=c[t+1],r=x(e.revenue,null==s?void 0:s.revenue);return x(e.profit,null==s?void 0:s.profit),(0,a.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:["Year ",e.year]}),null!==r&&(0,a.jsxs)("div",{className:"flex items-center text-sm ".concat(r>=0?"text-green-600":"text-red-600"),children:[r>=0?(0,a.jsx)(C.Z,{className:"h-4 w-4 mr-1"}):(0,a.jsx)(k.Z,{className:"h-4 w-4 mr-1"}),Math.abs(r).toFixed(1),"% YoY"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Revenue"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m(e.revenue)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Profit"}),(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:m(e.profit)})]})]})]},e.year)}),t.length>3&&(0,a.jsx)("button",{onClick:()=>l(!s),className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Show All Results (",t.length,")"]})})]})]})}var F=s(92940),L=s(71935),A=s(40933),E=s(22023),R=s(51077);function T(e){let{tenders:t}=e,[s,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)("all"),c=[...t].sort((e,t)=>new Date(t.submissionDate).getTime()-new Date(e.submissionDate).getTime()).filter(e=>"all"===n||e.status.toLowerCase()===n.toLowerCase()),d=s?c:c.slice(0,5),o=e=>{switch(e.toLowerCase()){case"won":return"bg-green-100 text-green-800";case"lost":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},h=e=>{switch(e.toLowerCase()){case"won":return(0,a.jsx)(F.Z,{className:"h-5 w-5 text-green-500"});case"lost":return(0,a.jsx)(L.Z,{className:"h-5 w-5 text-red-500"});case"pending":return(0,a.jsx)(A.Z,{className:"h-5 w-5 text-yellow-500"});default:return null}},u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(e);return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow",children:(0,a.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tender History"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"block w-32 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"won",children:"Won"}),(0,a.jsx)("option",{value:"lost",children:"Lost"}),(0,a.jsx)("option",{value:"pending",children:"Pending"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Total Value: ",(0,a.jsx)("span",{className:"font-medium",children:u(c.reduce((e,t)=>e+t.value,0))})]})]})]}),0===c.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(E.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tenders found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"all"===n?"No tender history available":"No ".concat(n," tenders found")})]}):(0,a.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,a.jsx)("div",{className:"p-4 bg-white border rounded-lg hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("span",{className:"ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(o(e.status)),children:e.status})]}),(0,a.jsxs)("div",{className:"mt-1 grid grid-cols-2 gap-4 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),e.organization]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),new Date(e.submissionDate).toLocaleDateString()]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(R.Z,{className:"h-4 w-4 mr-1"}),u(e.value)]}),e.completionDate&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.Z,{className:"h-4 w-4 mr-1"}),new Date(e.completionDate).toLocaleDateString()]})]})]}),(0,a.jsx)("div",{className:"ml-4",children:h(e.status)})]})},e.id))}),c.length>5&&(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsx)("button",{onClick:()=>l(!s),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Show All (",c.length,")"]})})})]})})}var U=s(20500),I=s(76780);function P(e){let{encumbrances:t}=e,[s,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)("all"),c=[...t].sort((e,t)=>new Date(t.registrationDate).getTime()-new Date(e.registrationDate).getTime()).filter(e=>"all"===n||e.type===n),d=s?c:c.slice(0,3),o=Array.from(new Set(t.map(e=>e.type))),m=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(e),h=e=>{switch(e.toLowerCase()){case"mortgage":return"bg-purple-100 text-purple-800";case"charge":return"bg-blue-100 text-blue-800";case"lien":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Encumbrances"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Total Value: ",m(t.reduce((e,t)=>e+t.value,0))]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>i("all"),className:"px-3 py-1 text-sm rounded-md ".concat("all"===n?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"All"}),o.map(e=>(0,a.jsx)("button",{onClick:()=>i(e),className:"px-3 py-1 text-sm rounded-md capitalize ".concat(n===e?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))]})]}),0===c.length?(0,a.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[(0,a.jsx)(U.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No encumbrances found"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"all"===n?"No encumbrances registered":"No ".concat(n," encumbrances found")})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[d.map(e=>(0,a.jsxs)("div",{className:"p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("span",{className:"ml-2 px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(h(e.type)),children:e.type})]}),(0,a.jsxs)("p",{className:"mt-1 text-sm text-gray-500",children:["Reference: ",e.referenceNumber]})]}),(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:m(e.value)})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Registration Date"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:new Date(e.registrationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.expiryDate&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(I.Z,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-500",children:"Expiry Date"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:new Date(e.expiryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),e.description&&(0,a.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:e.description})]},e.id)),c.length>3&&(0,a.jsx)("button",{onClick:()=>l(!s),className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Show Less"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Show All Encumbrances (",c.length,")"]})})]})]})}var Y=s(60722);function z(e){let{companyId:t,companyName:s,directors:l,shareholders:n}=e,i=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!i.current)return;Y.Ys(i.current).selectAll("*").remove();let e=Y.Ys(i.current).attr("width",1e3).attr("height",400);e.append("rect").attr("width",1e3).attr("height",400).attr("fill","white");let a=new Map;l.forEach(e=>{a.set(e.name,{id:e.id,name:e.name,roles:new Set(["director"])})}),n.forEach(e=>{if(a.has(e.name)){let t=a.get(e.name);t.roles.add("shareholder"),t.shareholding=e.percentage}else a.set(e.name,{id:e.id,name:e.name,roles:new Set(["shareholder"]),shareholding:e.percentage})});let r=[{id:t,name:s,type:"company"},...Array.from(a.values()).map(e=>({id:e.id,name:e.name,type:"person",roles:Array.from(e.roles),shareholding:e.shareholding}))],c=Array.from(a.values()).map(e=>({source:e.id,target:t,type:"connection"})),d=Y.A4v(r).force("link",Y.Fsl(c).id(e=>e.id).distance(150)).force("charge",Y.q5i().strength(-1e3)).force("center",Y.wqt(500,200)),o=e.append("g").selectAll("line").data(c).join("line").attr("stroke","#94a3b8").attr("stroke-width",1).attr("stroke-opacity",.6),m=e.append("g").selectAll("g").data(r).join("g").call(Y.ohM().on("start",function(e){e.active||d.alphaTarget(.3).restart(),e.subject.fx=e.subject.x,e.subject.fy=e.subject.y}).on("drag",function(e){e.subject.fx=e.x,e.subject.fy=e.y}).on("end",function(e){e.active||d.alphaTarget(0),e.subject.fx=null,e.subject.fy=null}));m.append("text").attr("dy",-10).attr("text-anchor","middle").attr("fill","#1f2937").attr("font-size","12px").text(e=>e.name),m.each(function(e){if("person"===e.type){let t=Y.Ys(this),s=e.roles.sort();s.forEach((e,a)=>{t.append("circle").attr("r",6).attr("cx",(a-(s.length-1)/2)*14).attr("cy",5).attr("fill","director"===e?"#9333ea":"#2563eb")}),e.shareholding&&t.append("text").attr("dy",25).attr("text-anchor","middle").attr("fill","#64748b").attr("font-size","10px").text("".concat(e.shareholding,"%"))}else Y.Ys(this).append("circle").attr("r",9).attr("fill","#ef4444")});let x=e.append("g").attr("class","legend").attr("transform","translate(".concat(100,", ").concat(100,")")).selectAll(".legend-item").data([{type:"company",color:"#ef4444",label:"Company"},{type:"director",color:"#9333ea",label:"Director"},{type:"shareholder",color:"#2563eb",label:"Shareholder"}]).enter().append("g").attr("class","legend-item").attr("transform",(e,t)=>"translate(0, ".concat(20*t,")"));x.append("circle").attr("r",6).attr("fill",e=>e.color),x.append("text").attr("x",15).attr("y",4).text(e=>e.label).attr("font-size","12px").attr("fill","#4b5563"),d.on("tick",()=>{o.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),m.attr("transform",e=>"translate(".concat(e.x,",").concat(e.y,")"))})},[t,s,l,n]),(0,a.jsx)("div",{className:"w-full h-[400px] bg-white rounded-lg shadow p-4 mb-8",children:(0,a.jsx)("svg",{ref:i,className:"w-full h-full"})})}function O(e){let{company:t}=e;return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(o,{company:t}),(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Company Network"}),(0,a.jsx)("div",{className:"h-96",children:(0,a.jsx)(z,{companyId:t.id,companyName:t.name,directors:t.directors,shareholders:t.shareholders})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)(f,{company:t})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)(Z,{results:t.financialResults})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)(T,{tenders:t.tenders})}),(0,a.jsx)("div",{className:"bg-white shadow rounded-lg p-6",children:(0,a.jsx)(P,{encumbrances:t.encumbrances})})]}),t.shareholders.length>0&&(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Shareholders"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Shares"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.shareholders.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.shares.toLocaleString()}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.percentage,"%"]})]},t))})]})})]})]})}function _(e){let{params:t}=e,[s,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async function(){try{let e=await fetch("/api/companies/".concat(t.id),{headers:{"Content-Type":"application/json"}});if(401===e.status){d("Unauthorized access. Please login first.");return}if(!e.ok)throw Error("Failed to fetch company details");let s=await e.json();l(s)}catch(e){console.error("Error fetching company:",e),d("Failed to load company details")}finally{i(!1)}})()},[t.id]),n)?(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("h1",{children:"Loading company details..."})}):c?(0,a.jsxs)("div",{className:"p-4 text-red-500",children:[(0,a.jsx)("h1",{children:"Error loading company"}),(0,a.jsx)("p",{children:c})]}):s?(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)(O,{company:s})}):(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("h1",{children:"Company not found"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[138,444,977,130,215,744],()=>t(22972)),_N_E=e.O()}]);